"use strict";(self.webpackChunkweb_client_video_gateway=self.webpackChunkweb_client_video_gateway||[]).push([[966],{2966:function(e,t,o){o.r(t),o.d(t,{default:function(){return s}}),o(1703);var i=o(8234),s=(t={components:{},data(){return{isUpPws:!1,loginLoading:!1,loginForm:{rememberMe:!1,automatic:!1,account:"admin",password:"123456"},rules:{account:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},pwsForm:{passwd:null,checkPass:null},userId:null,pwsRules:{passwd:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:(e,t,o)=>{""===t?o(new Error("请输入密码")):(""!==this.pwsForm.checkPass&&this.$refs.pwsForm.validateField("checkPass"),o())},trigger:"blur"}],checkPass:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(e,t,o)=>{""===t?o(new Error("请再次输入密码")):t!==this.pwsForm.passwd?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},isBeforeUpdate:!0,num:0,isClick:!0}},mounted(){(0,i.bh)("account")&&(this.loginForm.account=(0,i.bh)("account"),this.loginForm.password=(0,i.bh)("password"),this.loginForm.rememberMe=!0)},methods:{loginBtn(){this.$refs.loginForm.validate((e=>{if(!e)return this.$message({type:"warning",message:"格式错误"}),!1;this.loginLoading=!0,this.loginForm.rememberMe?(e=this.loginForm.password,(0,i.PQ)("account",this.loginForm.account),(0,i.PQ)("password",e)):((0,i.kr)("account"),(0,i.kr)("password")),this.$store.dispatch("login",this.loginForm).then((e=>{e.status?this.$message({type:"success",message:"登录成功!",duration:1e3,onClose:()=>{this.$router.push("/realTimeMonitoring")}}):this.$message.error(e.message),this.loginLoading=!1})).catch((()=>{this.loginLoading=!1}))}))},upPwdConfirm(){this.$refs.pwsForm.validate((e=>{if(!e)return!1}))}}},(0,o(3736).Z)(t,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",{staticClass:"login-page"},[e._m(0),t("div",{staticClass:"login-contents"},[e._m(1),t("div",{staticClass:"login-info"},[t("div",{staticClass:"login-info_header"},[e._v("账号登录")]),t("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{staticClass:"login-input",attrs:{placeholder:"请输入账号","prefix-icon":"el-icon-s-custom"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginBtn("loginForm")}},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginBtn("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px"},model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("记住密码")]),t("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px",float:"right"},model:{value:e.loginForm.automatic,callback:function(t){e.$set(e.loginForm,"automatic",t)},expression:"loginForm.automatic"}},[e._v("自动登录")]),t("el-button",{staticClass:"login-btn primaryBtn",attrs:{type:"primary",loading:e.loginLoading},on:{click:function(t){return e.loginBtn("loginForm")}}},[e.loginLoading?t("span",[e._v("登 录 中...")]):t("span",[e._v("登 录")])])],1)],1)])])}),[function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",{staticClass:"head-title"},[t("i",{staticClass:"iconfont svg-icon"},[e._v("")]),t("span",[e._v(" 智慧安防小区汇聚服务")])])},function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",{staticClass:"login-content-name"},[t("div",{staticClass:"login-name"},[e._v("智慧安防汇聚服务管理系统")]),t("div",{staticClass:"login-ability"},[e._v("在线 / 协作 / 高效")])])}],!1,null,"318e41c1",null).exports)}}]);